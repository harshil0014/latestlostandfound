screens{% extends 'layouts/base.html' %}
{% block title %}Dashboard · Lost & Found{% endblock %}

{% block content %}
<!-- ── HERO + SEARCH ───────────────────────────────────────── -->
<section class="lf-hero rounded-4 p-5 mb-5 text-white position-relative overflow-hidden">

  <!-- search bar, top-right on md+ screens -->
  <form action="{{ url_for('found_items') }}" method="get"
        class="position-absolute top-0 end-0 m-4 d-none d-md-block"
        style="max-width:320px">
    <div class="input-group bg-body-tertiary bg-opacity-25 rounded-3">
      <span class="input-group-text bg-transparent border-0">
        <i class="fa fa-search text-white-50"></i>
      </span>
      <input class="form-control bg-transparent border-0 text-white"
             name="q"
             placeholder="Search Found Items…">
    </div>
  </form>

  <h1 class="display-5 fw-semibold">Lost and Found Website</h1>
  <p class="lead mb-5 col-md-7 col-lg-6">
    Easily report, find and claim lost items through our user-friendly platform.
  </p>

  <div class="row text-center text-md-start fw-semibold">
    <div class="col-4 col-md-auto">
      <div class="fs-2">{{ found_count }}</div>
      <small class="text-white-50">Items Found</small>
    </div>
    <div class="col-4 col-md-auto">
      <div class="fs-2">{{ claims_total }}</div>
      <small class="text-white-50">Total Claims</small>
    </div>
    <div class="col-4 col-md-auto">
      <div class="fs-2">{{ claims_resolved }}</div>
      <small class="text-white-50">Resolved</small>
    </div>
  </div>
</section>

<!-- ── CATEGORY SHORTCUTS ──────────────────────────────────── -->
<div class="container px-3">
  <div class="row g-4">

    <!-- Books -->
    <a href="{{ url_for('category_items',cat='books') }}"
       class="col-6 col-md-3 text-decoration-none">
      <article class="lf-card lf-cat-tile lf-cat-books text-white p-4 text-center shadow-sm h-100">
        <i class="fa-solid fa-book fa-2x mb-3"></i>
        <h6 class="fw-semibold m-0">Books</h6>
      </article>
    </a>

    <!-- Stationary -->
    <a href="{{ url_for('category_items',cat='stationary') }}"
       class="col-6 col-md-3 text-decoration-none">
      <article class="lf-card lf-cat-tile lf-cat-stationary text-white p-4 text-center shadow-sm h-100">
        <i class="fa-solid fa-pen-ruler fa-2x mb-3"></i>
        <h6 class="fw-semibold m-0">Stationary</h6>
      </article>
    </a>

    <!-- Accessories -->
    <a href="{{ url_for('category_items',cat='accessories') }}"
       class="col-6 col-md-3 text-decoration-none">
      <article class="lf-card lf-cat-tile lf-cat-accessories text-white p-4 text-center shadow-sm h-100">
        <i class="fa-solid fa-bag-shopping fa-2x mb-3"></i>
        <h6 class="fw-semibold m-0">Accessories</h6>
      </article>
    </a>
    
    <!-- Personal Belongings -->
   <a href="{{ url_for('category_items',cat='personalbelongings') }}"
    class="col-6 col-md-3 text-decoration-none">
   <article class="lf-card lf-cat-tile lf-cat-personalbelongings text-white p-4 text-center shadow-sm h-100">
    <i class="fa-solid fa-user fa-2x mb-3"></i>
    <h6 class="fw-semibold m-0">Personal Belongings</h6>
    </article>
   </a>

    <!-- Others -->
    <a href="{{ url_for('category_items',cat='others') }}"
       class="col-6 col-md-3 text-decoration-none">
      <article class="lf-card lf-cat-tile lf-cat-others text-white p-4 text-center shadow-sm h-100">
        <i class="fa-solid fa-box-open fa-2x mb-3"></i>
        <h6 class="fw-semibold m-0">Others</h6>
      </article>
    </a>

</div>
</div>
<!-- ── ANNOUNCEMENTS SECTION ───────────────────────────────────────── -->
<div class="container mt-5">
  <h3 class="mb-3">📢 Announcements</h3>

  <!-- Display announcements -->
  <div class="border p-3 rounded bg-light mb-4" style="max-height:200px; overflow-y:auto;">
    {% if announcements %}
      <ul class="list-unstyled mb-0">
        {% for ann in announcements %}
          <li class="mb-2">
            🗓️ <strong>{{ ann.created_at.strftime('%Y-%m-%d') }}</strong> – {{ ann.message }}
            {{ ann.message }}
            <br>
            <small class="text-muted">
             Posted by: {{ ann.author.email if ann.author else 'Unknown' }}
            </small>
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p class="text-muted">No announcements yet.</p>
    {% endif %}
  </div>

  <!-- Admin-only announcement form -->
  {% if current_user.is_authenticated and current_user.is_admin %}
    <form method="POST" action="{{ url_for('add_announcement') }}">
      <div class="input-group">
        <input type="text" name="announcement" class="form-control" placeholder="Type new announcement…" required>
        <button type="submit" class="btn btn-primary">Post</button>
      </div>
    </form>
  {% endif %}
</div>

{% endblock %}
